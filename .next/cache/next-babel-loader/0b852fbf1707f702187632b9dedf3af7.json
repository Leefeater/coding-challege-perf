{"ast":null,"code":"var _jsxFileName = \"/Users/nhargitt/Documents/convertly/janky2/app/Blog/index.js\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React from 'react';\nimport { getAllGraphPosts, getGraphPost } from \"../utils/graph\";\nimport { BlogPostPreview } from \"./BlogPostPreview\";\nimport styled from 'styled-components';\nconst BlogWrapper = styled.div.withConfig({\n  displayName: \"Blog__BlogWrapper\",\n  componentId: \"cpre2j-0\"\n})([\"display:grid;grid-auto-rows:400px;grid-template-columns:repeat(3,30%);grid-gap:40px 40px;width:100vw;padding:40px;\"]);\nexport class Blog extends React.Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"counter\", 0);\n\n    this.state = {\n      blogPostsIds: [],\n      siteId: \"a402fab0-dfc9-11e9-815b-41f22eba7175\",\n      activeId: false,\n      blogPosts: {}\n    };\n    this.fetchBlogPost = this.fetchBlogPost.bind(this);\n    this.updateActiveId = this.updateActiveId.bind(this);\n  }\n\n  getBlogPostsIds() {\n    getAllGraphPosts().then(res => {\n      this.setState({\n        blogPostsIds: res.blogPosts\n      });\n    });\n  }\n\n  async fetchBlogPost(id) {\n    if (this.counter !== 0) return false;\n    this.counter++;\n    if (this.state.blogPosts[id]) return this.state.blogPosts[id];\n    const blogPost = await getGraphPost(id);\n    this.setState(prevState => {\n      let posts = _objectSpread({}, prevState.blogPosts);\n\n      posts[id] = blogPost;\n    });\n    return blogPost;\n  }\n\n  updateActiveId(id) {\n    this.setState({\n      activeId: id\n    });\n  }\n\n  componentDidMount() {\n    this.getBlogPostsIds();\n  }\n\n  render() {\n    return __jsx(BlogWrapper, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, this.state.blogPostsIds.map((id, index) => {\n      return __jsx(BlogPostPreview, {\n        id: id,\n        siteId: this.state.siteId,\n        activeId: this.state.activeId,\n        updateActiveId: this.updateActiveId,\n        index: index,\n        fetchBlogPost: this.fetchBlogPost,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      });\n    }));\n  }\n\n}","map":{"version":3,"sources":["/Users/nhargitt/Documents/convertly/janky2/app/Blog/index.js"],"names":["React","getAllGraphPosts","getGraphPost","BlogPostPreview","styled","BlogWrapper","div","Blog","Component","constructor","props","state","blogPostsIds","siteId","activeId","blogPosts","fetchBlogPost","bind","updateActiveId","getBlogPostsIds","then","res","setState","id","counter","blogPost","prevState","posts","componentDidMount","render","map","index"],"mappings":";;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,gBAAR,EAA0BC,YAA1B,QAA6C,gBAA7C;AACA,SAAQC,eAAR,QAA8B,mBAA9B;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AAIA,MAAMC,WAAW,GAAGD,MAAM,CAACE,GAAV;AAAA;AAAA;AAAA,0HAAjB;AASA,OAAO,MAAMC,IAAN,SAAmBP,KAAK,CAACQ,SAAzB,CAAmC;AAGtCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;;AADe,qCAsBT,CAtBS;;AAIf,SAAKC,KAAL,GAAa;AACTC,MAAAA,YAAY,EAAE,EADL;AAETC,MAAAA,MAAM,EAAE,sCAFC;AAGTC,MAAAA,QAAQ,EAAE,KAHD;AAITC,MAAAA,SAAS,EAAE;AAJF,KAAb;AAOA,SAAKC,aAAL,GAAqB,KAAKA,aAAL,CAAmBC,IAAnB,CAAwB,IAAxB,CAArB;AACA,SAAKC,cAAL,GAAsB,KAAKA,cAAL,CAAoBD,IAApB,CAAyB,IAAzB,CAAtB;AACH;;AAEDE,EAAAA,eAAe,GAAG;AAEdlB,IAAAA,gBAAgB,GAAGmB,IAAnB,CAAyBC,GAAG,IAAI;AAC5B,WAAKC,QAAL,CAAc;AAACV,QAAAA,YAAY,EAACS,GAAG,CAACN;AAAlB,OAAd;AACH,KAFD;AAIH;;AAED,QAAMC,aAAN,CAAoBO,EAApB,EAAwB;AAC5B,QAAG,KAAKC,OAAL,KAAiB,CAApB,EAAuB,OAAO,KAAP;AACf,SAAKA,OAAL;AACA,QAAG,KAAKb,KAAL,CAAWI,SAAX,CAAqBQ,EAArB,CAAH,EAA6B,OAAO,KAAKZ,KAAL,CAAWI,SAAX,CAAqBQ,EAArB,CAAP;AAE7B,UAAME,QAAQ,GAAG,MAAMvB,YAAY,CAACqB,EAAD,CAAnC;AACA,SAAKD,QAAL,CAAeI,SAAD,IAAe;AACrB,UAAIC,KAAK,qBAAOD,SAAS,CAACX,SAAjB,CAAT;;AACAY,MAAAA,KAAK,CAACJ,EAAD,CAAL,GAAYE,QAAZ;AACH,KAHL;AAMA,WAAOA,QAAP;AACH;;AAEDP,EAAAA,cAAc,CAACK,EAAD,EAAK;AACf,SAAKD,QAAL,CAAc;AAACR,MAAAA,QAAQ,EAAES;AAAX,KAAd;AACH;;AAEDK,EAAAA,iBAAiB,GAAG;AAChB,SAAKT,eAAL;AACH;;AAEDU,EAAAA,MAAM,GAAG;AAGL,WACI,MAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEQ,KAAKlB,KAAL,CAAWC,YAAX,CAAwBkB,GAAxB,CAA4B,CAACP,EAAD,EAAKQ,KAAL,KAAe;AACvC,aAAQ,MAAC,eAAD;AAAiB,QAAA,EAAE,EAAER,EAArB;AAAyB,QAAA,MAAM,EAAE,KAAKZ,KAAL,CAAWE,MAA5C;AAAoD,QAAA,QAAQ,EAAE,KAAKF,KAAL,CAAWG,QAAzE;AACiB,QAAA,cAAc,EAAE,KAAKI,cADtC;AACsD,QAAA,KAAK,EAAEa,KAD7D;AAEiB,QAAA,aAAa,EAAE,KAAKf,aAFrC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAR;AAGH,KAJD,CAFR,CADJ;AAcH;;AAlEqC","sourcesContent":["import React from 'react';\nimport {getAllGraphPosts, getGraphPost} from \"../utils/graph\";\nimport {BlogPostPreview} from \"./BlogPostPreview\";\nimport styled from 'styled-components';\n\n\n\nconst BlogWrapper = styled.div`\n    display: grid;\n    grid-auto-rows: 400px;\n    grid-template-columns: repeat(3,30%);\n    grid-gap: 40px 40px;\n    width: 100vw;\n    padding: 40px;\n`\n\nexport class Blog extends React.Component {\n\n\n    constructor(props) {\n        super(props);\n\n\n        this.state = {\n            blogPostsIds: [],\n            siteId: \"a402fab0-dfc9-11e9-815b-41f22eba7175\",\n            activeId: false,\n            blogPosts: {}\n        }\n\n        this.fetchBlogPost = this.fetchBlogPost.bind(this);\n        this.updateActiveId = this.updateActiveId.bind(this);\n    }\n\n    getBlogPostsIds() {\n\n        getAllGraphPosts().then( res => {\n            this.setState({blogPostsIds:res.blogPosts})\n        })\n\n    }\n    counter = 0\n    async fetchBlogPost(id) {\nif(this.counter !== 0) return false\n        this.counter ++;\n        if(this.state.blogPosts[id]) return this.state.blogPosts[id]\n\n        const blogPost = await getGraphPost(id)\n        this.setState((prevState) => {\n                let posts = {...prevState.blogPosts}\n                posts[id] = blogPost;\n            }\n         );\n\n        return blogPost\n    }\n\n    updateActiveId(id) {\n        this.setState({activeId: id})\n    }\n\n    componentDidMount() {\n        this.getBlogPostsIds()\n    }\n\n    render() {\n\n\n        return (\n            <BlogWrapper>\n                {\n                    this.state.blogPostsIds.map((id, index) => {\n                        return (<BlogPostPreview id={id} siteId={this.state.siteId} activeId={this.state.activeId}\n                                                 updateActiveId={this.updateActiveId} index={index}\n                                                 fetchBlogPost={this.fetchBlogPost}/>)\n                    })\n                }\n            </BlogWrapper>\n\n        )\n\n\n    }\n\n\n}"]},"metadata":{},"sourceType":"module"}